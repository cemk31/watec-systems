<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Signup</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="signup-logo">
    <img src="assets/img/watec/watec_logo.png" alt="Ionic logo">
  </div>
  <ion-row>
    <ion-col>
      <div *ngIf="showLoggedInWarning" style="background-color: green; text-align: center; color: white;">
        <ion-toolbar color="warning">
          <ion-title >Sie sind schon eingeloggt!</ion-title>
        </ion-toolbar>
      </div>
      <form #signupForm="ngForm" *ngIf="!showLoggedInWarning" novalidate>
        <ion-list lines="none">
          <ion-row>
            <ion-col>
                <div *ngIf="showSuccessMessage" style="background-color: green; text-align: center; color: white;">
                  <ion-toolbar color="success">
                    <ion-title >Registrierung erfolgreich abgeschlossen!</ion-title>
                  </ion-toolbar>
                </div>
                <form #inviteCodeForm="ngForm">
                  <ion-item>
                    <ion-label position="stacked" color="primary">EINLADUNGS-CODE</ion-label>
                    <ion-input [(ngModel)]="inviteCodeForm.token" name="token" type="text" #token="ngModel" required placeholder="Diesen Code erhalten Sie druch den Administrator.">
                    </ion-input>
                  </ion-item>
                </form>

            </ion-col>
            <ion-col>          
              <ion-item>
                <ion-button (click)="validateCode(inviteCodeForm)" type="submit" expand="block">Code prüfen</ion-button>
              </ion-item>
          </ion-col>
          </ion-row>

          <ng-container *ngIf="showRegisterForm">
            <ion-card color="success">
              <ion-card-content>
                Einladungscode gültig! Sie können sich erfolgreich registrieren!
              </ion-card-content>
            </ion-card>            
            <ion-item>
              <ion-label position="stacked" color="primary">UserRole</ion-label>
              <ion-input [(ngModel)]="signup.userRole" name="userRole" type="text" #userRole="ngModel" value="{{userRole}}" disabled></ion-input>
            </ion-item>
            
            <ion-item>
              <ion-label position="stacked" color="primary">E-Mail</ion-label>
              <ion-input [(ngModel)]="signup.email" name="email" type="email" #email="ngModel" required>
              </ion-input>
            </ion-item>
            <ion-text color="danger">
              <p [hidden]="email.valid || submitted == false" class="ion-padding-start">
                Username is required
              </p>
            </ion-text>
      
            <ion-item>
              <ion-label position="stacked" color="primary">Password</ion-label>
              <ion-input [(ngModel)]="signup.password" name="password" type="password" #password="ngModel" required>
              </ion-input>
            </ion-item>
            <ion-text color="danger">
              <p [hidden]="password.valid || submitted == false" class="ion-padding-start">
                Password is required
              </p>
            </ion-text>
            <ion-title>Persönliche Angaben</ion-title>
            <ion-item>
              <ion-label position="stacked" color="primary">Vorname</ion-label>
              <ion-input [(ngModel)]="signup.firstName" name="firstName" type="text" #firstName="ngModel" required>
              </ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="stacked" color="primary">Nachname</ion-label>
              <ion-input [(ngModel)]="signup.lastName" name="lastName" type="text" #lastName="ngModel" required>
              </ion-input>
            </ion-item>
            <div class="ion-padding">
              <ion-button (click)="onSignup(signupForm)" type="submit" expand="block">Registrieren</ion-button>
            </div>
          </ng-container>
          </ion-list>

    

      </form>
    </ion-col>
  </ion-row>
  <!-- <form #signupForm="ngForm" novalidate>
    <ion-list lines="none">
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label position="stacked" color="primary">EINLADUNGS-CODE</ion-label>
            <ion-input [(ngModel)]="signup.token" name="token" type="text" #token="ngModel" required placeholder="Diesen Code erhalten Sie druch den Administrator.">
            </ion-input>
          </ion-item>
        </ion-col>
        <ion-col>          
          <ion-item>
            <ion-button>Code prüfen</ion-button>
          </ion-item>
      </ion-col>
      </ion-row>
      <ion-item>
        <ion-label position="stacked" color="primary">E-Mail</ion-label>
        <ion-input [(ngModel)]="signup.email" name="email" type="email" #email="ngModel" required>
        </ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked" color="primary">Username</ion-label>
        <ion-input [(ngModel)]="signup.username" name="username" type="text" #username="ngModel" required>
        </ion-input>
      </ion-item>
      <ion-text color="danger">
        <p [hidden]="username.valid || submitted == false" class="ion-padding-start">
          Username is required
        </p>
      </ion-text>

      <ion-item>
        <ion-label position="stacked" color="primary">Password</ion-label>
        <ion-input [(ngModel)]="signup.password" name="password" type="password" #password="ngModel" required>
        </ion-input>
      </ion-item>
      <ion-text color="danger">
        <p [hidden]="password.valid || submitted == false" class="ion-padding-start">
          Password is required
        </p>
      </ion-text>
      <ion-title>Persönliche Angaben</ion-title>
      <ion-item>
        <ion-label position="stacked" color="primary">Vorname</ion-label>
        <ion-input [(ngModel)]="signup.firstName" name="firstName" type="text" #username="ngModel" required>
        </ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="stacked" color="primary">Nachname</ion-label>
        <ion-input [(ngModel)]="signup.lastName" name="lastName" type="text" #username="ngModel" required>
        </ion-input>
      </ion-item>
    </ion-list>

    <div class="ion-padding">
      <ion-button (click)="onSignup(signupForm)" type="submit" expand="block">Create</ion-button>
    </div>
  </form> -->

</ion-content>
